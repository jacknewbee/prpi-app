(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4169],{46109:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/voting/proposal/create",function(){return n(12350)}])},12350:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eS}});var r=n(98788),a=n(47842),c=n(70865),i=n(96670),o=n(87394),s=n(45680),d=n(52322),l=n(25130),u=n(61736),p=n(5406),h=n(33193),m=n(32301),x=n(64170),f=n(80751),_=n(30834),k=n(87016),Z=n(40125),g=n(22425),b=n(33080),j=n(78002),v=n(68303),y=n(40330),P=n(32602),T=n(24611),C=n.n(T),w=n(45455),D=n.n(w),B=n(61258),I=n.n(B),S=n(2784),E=n(98826),q=n(73921),M=n(71967),Y=n(95457),A=n(76636),F=n(25237),N=n.n(F),V=n(39097),G=n.n(V),H=n(5632),L=n(51147),z=n(26297),O=n(37726),R=n.n(O);n(60720);var $=function(e){var t=e.inputProps,n=(0,z.Z)(e,["inputProps"]);return(0,d.jsx)(R(),(0,c.Z)({customInput:(0,d.jsx)(x.Z,(0,c.Z)({},void 0===t?{}:t)),portalId:"reactDatePicker",dateFormat:"PPP"},n))},Q=n(92228),X=n(3411);function J(){var e=(0,Q.Z)(["\n  .react-datepicker-wrapper,\n  .react-datepicker__input-container {\n    display: block;\n  }\n\n  .react-datepicker {\n    background: ",";\n    border-color: ",";\n    color: ",";\n    font-family: 'Kanit', sans-serif;\n  }\n\n  .react-datepicker__header {\n    background: ",";\n    border-color: ",";\n  }\n\n  .react-datepicker__current-month,\n  .react-datepicker-time__header,\n  .react-datepicker-year-header,\n  .react-datepicker__day-name,\n  .react-datepicker__day,\n  .react-datepicker__time-name {\n    color: ",";\n  }\n\n  .react-datepicker__day:hover,\n  .react-datepicker__month-text:hover,\n  .react-datepicker__quarter-text:hover,\n  .react-datepicker__year-text:hover {\n    background-color: ",";\n  }\n\n  .react-datepicker-popper[data-placement^='bottom'] .react-datepicker__triangle::before,\n  .react-datepicker-popper[data-placement^='bottom'] .react-datepicker__triangle::after {\n    border-bottom-color: ",";\n  }\n\n  .react-datepicker__day--selected,\n  .react-datepicker__day--in-selecting-range,\n  .react-datepicker__day--in-range,\n  .react-datepicker__month-text--selected,\n  .react-datepicker__month-text--in-selecting-range,\n  .react-datepicker__month-text--in-range,\n  .react-datepicker__quarter-text--selected,\n  .react-datepicker__quarter-text--in-selecting-range,\n  .react-datepicker__quarter-text--in-range,\n  .react-datepicker__year-text--selected,\n  .react-datepicker__year-text--in-selecting-range,\n  .react-datepicker__year-text--in-range {\n    background-color: ",";\n  }\n\n  .react-datepicker__day--selected:hover,\n  .react-datepicker__day--in-selecting-range:hover,\n  .react-datepicker__day--in-range:hover,\n  .react-datepicker__month-text--selected:hover,\n  .react-datepicker__month-text--in-selecting-range:hover,\n  .react-datepicker__month-text--in-range:hover,\n  .react-datepicker__quarter-text--selected:hover,\n  .react-datepicker__quarter-text--in-selecting-range:hover,\n  .react-datepicker__quarter-text--in-range:hover,\n  .react-datepicker__year-text--selected:hover,\n  .react-datepicker__year-text--in-selecting-range:hover,\n  .react-datepicker__year-text--in-range:hover {\n    background-color: ",";\n  }\n\n  .react-datepicker__day--keyboard-selected,\n  .react-datepicker__month-text--keyboard-selected,\n  .react-datepicker__quarter-text--keyboard-selected,\n  .react-datepicker__year-text--keyboard-selected {\n    background-color: ",";\n    color: #ffffff;\n  }\n\n  .react-datepicker__day--keyboard-selected:hover,\n  .react-datepicker__month-text--keyboard-selected:hover,\n  .react-datepicker__quarter-text--keyboard-selected:hover,\n  .react-datepicker__year-text--keyboard-selected:hover {\n    background-color: ",";\n    color: #ffffff;\n  }\n\n  .react-datepicker__time-container,\n  .react-datepicker__time-container .react-datepicker__time .react-datepicker__time-box {\n    width: 120px;\n  }\n\n  .react-datepicker__header--time {\n    padding: 8px;\n  }\n\n  .react-datepicker__time-container\n    .react-datepicker__time\n    .react-datepicker__time-box\n    ul.react-datepicker__time-list\n    li.react-datepicker__time-list-item {\n    height: auto;\n    padding: 8px;\n  }\n\n  .react-datepicker__time-container\n    .react-datepicker__time\n    .react-datepicker__time-box\n    ul.react-datepicker__time-list\n    li.react-datepicker__time-list-item {\n    background-color: ",";\n\n    &:hover {\n      background-color: ",";\n    }\n  }\n\n  .react-datepicker__time-container\n    .react-datepicker__time\n    .react-datepicker__time-box\n    ul.react-datepicker__time-list\n    li.react-datepicker__time-list-item--selected {\n    color: ",";\n  }\n"]);return J=function(){return e},e}var K=X.ZP.div.withConfig({componentId:"sc-1ce524b4-0"})(J(),function(e){return e.theme.card.background},function(e){return e.theme.colors.cardBorder},function(e){return e.theme.colors.text},function(e){return e.theme.colors.input},function(e){return e.theme.colors.cardBorder},function(e){return e.theme.colors.text},function(e){return e.theme.colors.cardBorder},function(e){return e.theme.colors.cardBorder},function(e){return e.theme.colors.primary},function(e){return e.theme.colors.primaryBright},function(e){return e.theme.colors.secondary},function(e){return e.theme.colors.secondary},function(e){return e.theme.card.background},function(e){return e.theme.colors.cardBorder},function(e){return e.theme.colors.text}),W=function(){return(0,d.jsx)(K,{id:"reactDatePicker"})},U=function(e){var t=(0,q.$G)().t;return(0,d.jsx)($,(0,c.Z)({showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:t("Time"),dateFormat:"ppp"},e))},ee=n(517),et=n(77816),en=n(25385),er=n(43435),ea=n(84252),ec=n(18845),ei=n(2380),eo=function(e){var t=e.block,n=e.onDismiss,r=(0,q.$G)().t,a=(0,ec.Z)(t),c=a.isLoading,i=a.total,o=a.cakeBalance,s=a.cakeVaultBalance,l=a.cakePoolBalance,u=a.poolsBalance,h=a.cakeBnbLpBalance,m=a.ifoPoolBalance,x=a.lockedCakeBalance,f=a.lockedEndTime,_=(0,ea.ZP)().theme;return(0,d.jsx)(en.ZP,{title:r("Voting Power"),onDismiss:function(){n()},headerBackground:_.colors.gradientCardHeader,children:(0,d.jsx)(p.ZP,{mb:"24px",width:["100%","100%","100%","320px"],children:c?(0,d.jsx)(b.Z,{height:"450px",alignItems:"center",justifyContent:"center",children:(0,d.jsx)(er.Z,{size:80})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ei.Z,{total:i,cakeBalance:o,cakeVaultBalance:s,cakePoolBalance:l,poolsBalance:u,ifoPoolBalance:m,cakeBnbLpBalance:h,lockedCakeBalance:x,lockedEndTime:f,block:t}),(0,d.jsx)(v.Z,{variant:"secondary",onClick:n,width:"100%",mt:"16px",children:r("Close")})]})})})},es=n(72248),ed=n(50930),el=n(74930),eu=n.n(el),ep=n(79221),eh=n(87094),em=function(e){var t=e.onRemove,n=e.onTextInput,r=(0,z.Z)(e,["onRemove","onTextInput"]),a=(0,o.Z)((0,S.useState)(!1),2),s=a[0],l=a[1],u=(0,o.Z)((0,S.useState)(!1),2),h=u[0],m=u[1];return(0,d.jsxs)(p.ZP,{position:"relative",mb:"16px",children:[(0,d.jsx)(x.Z,(0,i.Z)((0,c.Z)({},r),{onChange:function(e){var t=e.currentTarget.value;l(h&&0===t.length),m(!0),n(t)},isWarning:s})),t&&(0,d.jsx)(p.ZP,{position:"absolute",right:"8px",top:"0px",zIndex:30,children:(0,d.jsx)(ep.Z,{variant:"text",onClick:t,children:(0,d.jsx)(eh.Z,{})})})]})},ex=function(){return{id:eu()(),value:""}},ef=function(e){var t=e.choices,n=e.onChange,r=(0,q.$G)().t,a=t.filter(function(e){return e.value.length>0}).length>=2;return(0,d.jsxs)(f.Z,{children:[(0,d.jsx)(_.Z,{children:(0,d.jsx)(k.Z,{as:"h3",scale:"md",children:r("Choices")})}),(0,d.jsxs)(Z.Z,{children:[t.map(function(e,a){var c=e.id,i=e.value;return(0,d.jsx)(em,{scale:"lg",onTextInput:function(e){var r=(0,ed.Z)(t),a=r.findIndex(function(e){return e.id===c});r[a].value=e,n(r)},placeholder:r("Input choice text"),value:i,onRemove:a>1?function(){n(t.filter(function(e){return e.id!==c}))}:void 0},c)}),(0,d.jsx)(v.Z,{type:"button",onClick:function(){n((0,ed.Z)(t).concat([ex()]))},disabled:!a,children:r("Add Choice")})]})]})},e_=n(31200),ek=n(55754),eZ=n(31807),eg=function(e,t){if(!(0,e_.Z)(e)||!(0,e_.Z)(t))return null;var n=(0,ek.Z)(e,"yyyy-MM-dd"),r=(0,ek.Z)(t,"HH:mm:ss");return(0,eZ.Z)("".concat(n,"T").concat(r)).getTime()/1e3},eb=function(e,t){var n=e.name,r=e.body,a=e.choices,c=e.startDate,i=e.startTime,o=e.endDate,s=e.endTime,d=e.snapshot,l={};n||(l.name=[t("%field% is required",{field:"Title"})]),r||(l.body=[t("%field% is required",{field:"Body"})]),a.length<2&&(l.choices=[t("Please create a minimum of %num% choices",{num:2})]);var u=a.some(function(e){return!e.value});2===a.length&&u&&(l.choices=Array.isArray(l.choices)?(0,ed.Z)(l.choices).concat([t("Choices must not be empty")]):l.choices=[t("Choices must not be empty")]),(0,e_.Z)(c)||(l.startDate=[t("Please select a valid date")]),(0,e_.Z)(i)||(l.startTime=[t("Please select a valid time")]),(0,e_.Z)(o)||(l.endDate=[t("Please select a valid date")]),(0,e_.Z)(s)||(l.endTime=[t("Please select a valid time")]);var p=eg(c,i);return eg(o,s)<p&&(l.endDate=Array.isArray(l.endDate)?(0,ed.Z)(l.endDate).concat([t("End date must be after the start date")]):l.endDate=[t("End date must be after the start date")]),0===d&&(l.snapshot=[t("Invalid snapshot")]),l};function ej(){var e=(0,Q.Z)(["\n  color: ",";\n  display: block;\n  font-weight: 600;\n  margin-bottom: 8px;\n"]);return ej=function(){return e},e}function ev(){var e=(0,Q.Z)(["\n  font-size: 20px;\n"]);return ev=function(){return e},e}function ey(){var e=(0,Q.Z)(["\n  font-size: 12px;\n  text-transform: uppercase;\n"]);return ey=function(){return e},e}var eP=X.ZP.label.withConfig({componentId:"sc-408fcf5-0"})(ej(),function(e){return e.theme.colors.text}),eT=(0,X.ZP)(eP).withConfig({componentId:"sc-408fcf5-1"})(ev()),eC=(0,X.ZP)(eP).withConfig({componentId:"sc-408fcf5-2"})(ey()),ew=function(e){var t=e.children;return(0,d.jsx)(m.Z,{color:"failure",mb:"4px",children:t})},eD=function(e){var t=e.errors;return(0,d.jsx)(p.ZP,{mt:"8px",children:t.map(function(e){return(0,d.jsx)(ew,{children:e},e)})})},eB=new(C()).Client712("https://hub.snapshot.org"),eI=N()(function(){return Promise.all([n.e(2816),n.e(281),n.e(1496)]).then(n.bind(n,54154))},{loadableGenerated:{webpack:function(){return[54154]}},ssr:!1}),eS=function(){var e,t=(0,o.Z)((0,S.useState)(function(){return{name:"",body:"",choices:I()(2).map(ex),startDate:null,startTime:null,endDate:null,endTime:null,snapshot:0}}),2),n=t[0],T=t[1],C=(0,o.Z)((0,S.useState)(!1),2),w=C[0],B=C[1],F=(0,o.Z)((0,S.useState)({}),2),N=F[0],V=F[1],z=(0,q.$G)().t,O=(0,ee.mA)().address,R=(0,E.Xh)(),Q=(0,H.useRouter)().push,X=(0,l.p)(),J=X.toastSuccess,K=X.toastError,en=(0,o.Z)((0,u.Z)((0,d.jsx)(eo,{block:n.snapshot})),1)[0],er=n.name,ea=n.body,ec=n.choices,ei=n.startDate,ed=n.startTime,el=n.endDate,eu=n.endTime,ep=n.snapshot,eh=eb(n,z),em=(0,P.Hp)(),e_=(e=(0,r.Z)(function(e){var t,n;return(0,s.__generator)(this,function(r){switch(r.label){case 0:e.preventDefault(),r.label=1;case 1:return r.trys.push([1,3,,4]),B(!0),[4,eB.proposal(em,O,{space:es.Q8,type:"single-choice",title:er,body:ea,start:eg(ei,ed),end:eg(el,eu),choices:ec.filter(function(e){return e.value}).map(function(e){return e.value}),snapshot:ep,discussion:"",plugins:JSON.stringify({}),app:"snapshot"})];case 2:return t=r.sent(),Q("/voting/proposal/".concat(t.id)),J(z("Proposal created!")),[3,4];case 3:return n=r.sent(),K(z("Error"),null==n?void 0:n.message),console.error(n),B(!1),[3,4];case 4:return[2]}})}),function(t){return e.apply(this,arguments)}),ek=function(e,t){T(function(n){return(0,i.Z)((0,c.Z)({},n),(0,a.Z)({},e,t))}),V(function(t){return(0,i.Z)((0,c.Z)({},t),(0,a.Z)({},e,!0))})},eZ=function(e){return function(t){ek(e,t)}},ej=(0,S.useMemo)(function(){return{hideIcons:O&&es.F_.includes(O.toLowerCase())?[]:["guide","fullscreen","preview","side-by-side","image"]}},[O]);return(0,S.useEffect)(function(){R>0&&T(function(e){return(0,i.Z)((0,c.Z)({},e),{snapshot:R})})},[R,T]),(0,d.jsxs)(A.Z,{py:"40px",children:[(0,d.jsx)(p.ZP,{mb:"48px",children:(0,d.jsxs)(h.Z,{children:[(0,d.jsx)(G(),{href:"/",children:z("Home")}),(0,d.jsx)(G(),{href:"/voting",children:z("Voting")}),(0,d.jsx)(m.Z,{children:z("Make a Proposal")})]})}),(0,d.jsx)("form",{onSubmit:e_,children:(0,d.jsxs)(et.Z,{children:[(0,d.jsxs)(p.ZP,{children:[(0,d.jsxs)(p.ZP,{mb:"24px",children:[(0,d.jsx)(eT,{htmlFor:"name",children:z("Title")}),(0,d.jsx)(x.Z,{id:"name",name:"name",value:er,scale:"lg",onChange:function(e){var t=e.currentTarget;ek(t.name,t.value)},required:!0}),eh.name&&N.name&&(0,d.jsx)(eD,{errors:eh.name})]}),(0,d.jsxs)(p.ZP,{mb:"24px",children:[(0,d.jsx)(eT,{htmlFor:"body",children:z("Content")}),(0,d.jsx)(m.Z,{color:"textSubtle",mb:"8px",children:z("Tip: write in Markdown!")}),(0,d.jsx)(eI,{id:"body",name:"body",onTextChange:function(e){ek("body",e)},value:ea,options:ej,required:!0}),eh.body&&N.body&&(0,d.jsx)(eD,{errors:eh.body})]}),ea&&(0,d.jsx)(p.ZP,{mb:"24px",children:(0,d.jsxs)(f.Z,{children:[(0,d.jsx)(_.Z,{children:(0,d.jsx)(k.Z,{as:"h3",scale:"md",children:z("Preview")})}),(0,d.jsx)(Z.Z,{p:"0",px:"24px",children:(0,d.jsx)(g.Z,{children:ea})})]})}),(0,d.jsx)(ef,{choices:ec,onChange:function(e){ek("choices",e)}}),eh.choices&&N.choices&&(0,d.jsx)(eD,{errors:eh.choices})]}),(0,d.jsx)(p.ZP,{children:(0,d.jsxs)(f.Z,{children:[(0,d.jsx)(_.Z,{children:(0,d.jsx)(k.Z,{as:"h3",scale:"md",children:z("Actions")})}),(0,d.jsxs)(Z.Z,{children:[(0,d.jsxs)(p.ZP,{mb:"24px",children:[(0,d.jsx)(eC,{children:z("Start Date")}),(0,d.jsx)($,{name:"startDate",onChange:eZ("startDate"),selected:ei,placeholderText:"YYYY/MM/DD"}),eh.startDate&&N.startDate&&(0,d.jsx)(eD,{errors:eh.startDate})]}),(0,d.jsxs)(p.ZP,{mb:"24px",children:[(0,d.jsx)(eC,{children:z("Start Time")}),(0,d.jsx)(U,{name:"startTime",onChange:eZ("startTime"),selected:ed,placeholderText:"00:00"}),eh.startTime&&N.startTime&&(0,d.jsx)(eD,{errors:eh.startTime})]}),(0,d.jsxs)(p.ZP,{mb:"24px",children:[(0,d.jsx)(eC,{children:z("End Date")}),(0,d.jsx)($,{name:"endDate",onChange:eZ("endDate"),selected:el,placeholderText:"YYYY/MM/DD"}),eh.endDate&&N.endDate&&(0,d.jsx)(eD,{errors:eh.endDate})]}),(0,d.jsxs)(p.ZP,{mb:"24px",children:[(0,d.jsx)(eC,{children:z("End Time")}),(0,d.jsx)(U,{name:"endTime",onChange:eZ("endTime"),selected:eu,placeholderText:"00:00"}),eh.endTime&&N.endTime&&(0,d.jsx)(eD,{errors:eh.endTime})]}),O&&(0,d.jsxs)(b.Z,{alignItems:"center",mb:"8px",children:[(0,d.jsx)(m.Z,{color:"textSubtle",mr:"16px",children:z("Creator")}),(0,d.jsx)(j.Z,{isBscScan:!0,href:(0,L.C)(O,"address"),children:(0,M.Z)(O)})]}),(0,d.jsxs)(b.Z,{alignItems:"center",mb:"16px",children:[(0,d.jsx)(m.Z,{color:"textSubtle",mr:"16px",children:z("Snapshot")}),(0,d.jsx)(j.Z,{isBscScan:!0,href:(0,L.C)(ep,"block"),children:ep})]}),O?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v.Z,{type:"submit",width:"100%",isLoading:w,endIcon:w?(0,d.jsx)(y.Z,{spin:!0,color:"currentColor"}):null,disabled:!D()(eh),mb:"16px",children:z("Publish")}),(0,d.jsxs)(m.Z,{color:"failure",as:"p",mb:"4px",children:[z("You need at least %count% voting power to publish a proposal.",{count:es.V5})," "]}),(0,d.jsx)(v.Z,{scale:"sm",type:"button",variant:"text",onClick:en,p:0,children:z("Check voting power")})]}):(0,d.jsx)(Y.Z,{width:"100%",type:"button"})]})]})})]})}),(0,d.jsx)(W,{})]})}},33193:function(e,t,n){"use strict";var r=n(92228),a=n(50930),c=n(52322),i=n(2784),o=n(3411),s=n(78545),d=n(82743);function l(){var e=(0,r.Z)(["\n  align-items: center;\n  color: ",";\n  display: flex;\n  justify-content: center;\n  padding-left: 4px;\n  padding-right: 4px;\n\n  "," {\n    padding-left: 8px;\n    padding-right: 8px;\n  }\n\n  "," {\n    padding-left: 16px;\n    padding-right: 16px;\n  }\n"]);return l=function(){return e},e}function u(){var e=(0,r.Z)(["\n  align-items: center;\n  display: flex;\n  flex-wrap: wrap;\n  list-style-type: none;\n\n  a {\n    color: ",";\n\n    &:hover {\n      color: ",";\n    }\n  }\n\n  ","\n"]);return u=function(){return e},e}var p=o.ZP.div.withConfig({componentId:"sc-b9c7047c-0"})(l(),function(e){return e.theme.colors.textDisabled},function(e){return e.theme.mediaQueries.sm},function(e){return e.theme.mediaQueries.md}),h=o.ZP.ul.withConfig({componentId:"sc-b9c7047c-1"})(u(),function(e){return e.theme.colors.primary},function(e){return e.theme.colors.primaryBright},s.Dh),m=(0,c.jsx)(d.Z,{color:"currentColor",width:"24px"});t.Z=function(e){var t,n,r=e.separator,o=e.children,s=(t=i.Children.toArray(o).filter(function(e){return(0,i.isValidElement)(e)}),n=void 0===r?m:r,t.reduce(function(e,t,r){return 0===r?(0,a.Z)(e).concat([t]):(0,a.Z)(e).concat([(0,c.jsx)(p,{"aria-hidden":!0,children:n},"separator-".concat(r)),t])},[]));return(0,c.jsx)(h,{children:s.map(function(e,t){return(0,c.jsx)("li",{children:e},"child-".concat(t))})})}}},function(e){e.O(0,[862,5754,8834,8847,3857,1512,5246,9774,2888,179],function(){return e(e.s=46109)}),_N_E=e.O()}]);